<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.BranchMapper">


    <insert id="createNewBranch" parameterType="Branch">
        insert into Branch value (#{branch.agentId}, #{branch.repoName},#{branch.branchName},#{branch.rootRepoId},#{branch.currentRepoId});
    </insert>



    <!--  返回每个分支最新的节点(Father)  -->
    <select id="selectBranchAll" resultType="Branch">
       select * from Branch where RepoName = #{repoName} and AgentId = #{agentId} and BranchName = #{branchName};
    </select>


    <!--  用新new出来的最新节点(child) 更新 -->
    <update id="updateBranchCurrentId">
        update Branch set CurrentRepoId = #{currentRepoId} where RepoName = #{repoName} and AgentId = #{agentId} and BranchName = #{branchName};
    </update>







<!--    <select id="selectBranchByRepoNameAndAgentIdAndBranchName" resultMap="BranchResultMap">-->
<!--        select * from branchtable where RepoName = #{repoName} and AgentId = #{agentId} and BranchName = #{branchName};-->
<!--    </select>-->


<!--    <select id="GetCurrentRepoId" resultType="Branch"  >-->
<!--        select current_RepoId from TABLE ( BranchTable ) where Branch= #{Branch} and RepoName= #{RepoName} and AgentId = #{AgentId}-->
<!--    </select>-->


</mapper>







